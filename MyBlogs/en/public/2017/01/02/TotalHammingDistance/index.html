<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Total Hamming Distance"/>




  <meta name="keywords" content="Bitmap," />




  <link rel="alternate" href="/oj-code/atom.xml" title="Mike's OJ Games">




  <link rel="shortcut icon" type="image/x-icon" href="/oj-code/favicon.ico?v=2.1.0" />



<link rel="canonical" href="http://mikecoder.github.com/2017/01/02/TotalHammingDistance/"/>


<meta name="description" content="The Hamming distance between two integers is the number of positions at which the corresponding bits are different.
Now your job is to find the total Hamming distance between all pairs of the given n">
<meta property="og:type" content="article">
<meta property="og:title" content="Total Hamming Distance">
<meta property="og:url" content="http://mikecoder.github.com/2017/01/02/TotalHammingDistance/index.html">
<meta property="og:site_name" content="Mike's OJ Games">
<meta property="og:description" content="The Hamming distance between two integers is the number of positions at which the corresponding bits are different.
Now your job is to find the total Hamming distance between all pairs of the given n">
<meta property="og:updated_time" content="2017-01-03T06:47:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Total Hamming Distance">
<meta name="twitter:description" content="The Hamming distance between two integers is the number of positions at which the corresponding bits are different.
Now your job is to find the total Hamming distance between all pairs of the given n">


<link rel="stylesheet" type="text/css" href="/oj-code/css/style.css?v=2.1.0" />



  <link rel="stylesheet" type="text/css" href="/oj-code/lib/fancybox/jquery.fancybox.css" />




  



    <title> Total Hamming Distance · Mike's OJ Games </title>
  </head>

  <body>
    <div class="container">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/oj-code/." class="logo">Mike's OJ Games</a>
</div>

<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/oj-code/">
            Home
          </a>
        </li>
      
        
        <li class="menu-item">
          <a class="menu-item-link" href="/oj-code/archives/">
            Archives
          </a>
        </li>
      
      
    </ul>
  
</nav>

<div class="mobile-navbar">
  <div class="mobile-header">
    <div class="mobile-header-logo">
      <a href="/oj-code/." class="logo">Mike's OJ Games</a>
    </div>

    <div class="mobile-header-icon">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <nav class="mobile-menu">
    
      
      <a class="mobile-menu-item" href="/oj-code/">
        Home
      </a>
    
      
      <a class="mobile-menu-item" href="/oj-code/archives/">
        Archives
      </a>
    
  </nav>
</div>
      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Total Hamming Distance
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jan 2, 2017
        </span>
      </div>
    </header>

    

    <div class="post-content">
      
        <blockquote>
<p>The Hamming distance between two integers is the number of positions at which the corresponding bits are different.</p>
<p>Now your job is to find the total Hamming distance between all pairs of the given numbers.</p>
<p>Example:</p>
<p>Input: 4, 14, 2</p>
<p>Output: 6</p>
<p>Explanation: In binary representation, the 4 is 0100, 14 is 1110, and 2 is 0010 (just<br>showing the four bits relevant in this case). So the answer will be:<br>HammingDistance(4, 14) + HammingDistance(4, 2) + HammingDistance(14, 2) = 2 + 2 + 2 = 6.</p>
<p>Note:</p>
<ul>
<li>Elements of the given array are in the range of 0 to 10^9</li>
<li>Length of the array will not exceed 10^4.</li>
</ul>
<p>Subscribe to see which companies asked this question</p>
</blockquote>
<a id="more"></a>
<p>This is the leetcode No.477, we can quickly find a solution like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">using namespace std;</div><div class="line"></div><div class="line">class Solution &#123;</div><div class="line">public:</div><div class="line">    int totalHammingDistance(vector&lt;int&gt;&amp; nums) &#123;</div><div class="line">        int sum = 0;</div><div class="line">        for (int i = 0; i &lt; (int)nums.size() - 1; i++) &#123;</div><div class="line">            for (int j = i + 1; j &lt; (int)nums.size(); j++) &#123;</div><div class="line">                sum += hamming_distance(nums[i], nums[j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return sum;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    int hamming_distance(unsigned long long x, unsigned long long y) &#123;</div><div class="line">        return __builtin_popcountll(x ^ y);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>It is correct, however it time complex is O(n^2), and the result is TLE.</p>
<p>So, I found a better solution here. As we can see from the question, we can find the number is int type, and no larger than 2^32 in that we use a 32 bit size bitmap. For better explaination, I use 8 bit size as example.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">0000 0000</div><div class="line">1110 0010</div><div class="line">1101 0101</div></pre></td></tr></table></figure>
<p>We get such an array, and we just need to figure out how many 1s in each index. Take 1st index as an example, we get one 1 bit, and the total distance for the 1st index is (3-1)<em>(1) which stands for (n - bitCount) </em> bitCount.</p>
<p>So, what we should do is to add the total 32 bits.</p>
<p>Last, here comes to a solution:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">int totalHammingDistance(vector&lt;int&gt;&amp; nums) &#123;</div><div class="line">    int total = 0, bitCount = 0;</div><div class="line">    for (int idx = 0; idx &lt; 32; idx++) &#123;</div><div class="line">        for (int i = 0; i &lt; (int)nums.size(); i++) &#123;</div><div class="line">            bitCount += (nums[i] &gt;&gt; idx) &amp; 1;</div><div class="line">        &#125;</div><div class="line">        total += bitCount * (nums.size() - bitCount);</div><div class="line">    &#125;</div><div class="line">    return total;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>And it’s time complex is O(n*32) which means O(n) and it’s accepted.</p>

      
    </div>

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/oj-code/tags/Bitmap/">Bitmap</a>
          
        </div>

        
  <nav class="post-nav">
    
      <a class="prev" href="/oj-code/2017/01/03/132Pattern/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">132 Pattern</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/oj-code/2017/01/01/NewStart/">
        <span class="next-text nav-default">New Start</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    
  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/01/02/TotalHammingDistance/"
           data-title="Total Hamming Distance" data-url="http://mikecoder.github.com/oj-code/2017/01/02/TotalHammingDistance/">
      </div>
    
  </div>

        </div>  
      </main>

      <footer id="footer" class="footer">
  <div class="social-links">
    
      
        
          <a href="mailto:mike@mikecoder.cn" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/MikeCoder" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">MikeCoder</span>
  </span>
</div>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  // tracker methods like "setCustomDimension" should be called before "trackPageView"
  _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
  _paq.push(["setCookieDomain", "*.mikecoder.cn"]);
  _paq.push(["setDomains", ["*.mikecoder.cn","*.mikecoder.cn"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.mikecoder.cn/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.mikecoder.cn/piwik.php?idsite=1&rec=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->



      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"mikecoder-oj"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



    
  





  
    <script type="text/javascript" src="/oj-code/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/oj-code/lib/fancybox/jquery.fancybox.pack.js"></script>
  

    <script type="text/javascript" src="/oj-code/js/src/even.js?v=2.1.0"></script>
<script type="text/javascript" src="/oj-code/js/src/bootstrap.js?v=2.1.0"></script>

  </body>
</html>