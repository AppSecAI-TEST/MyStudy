哔哩哔哩最容易吐槽的动漫查询
----

这是我很早之前就想做的一个项目。因为，作为一个非动漫骨灰级玩家，或者说是一个刚刚接触这个领域的人来说。尝试下口碑较好的作品是比较好的入门方式。所以，我找了个专家 [May](http://maywanting.wang) 咨询了下，并且得到了一个动漫的列表吧。

然后就开始看了。很大程度上，很多的作品都是直接从 B 站上看的，因为有个好处，就是 B 站上有弹幕，而且往往好玩的并不是作品本身，而是弹幕引发的二次讨论。所以，我想对动漫的好看程度或者说是槽点进行一个排名。通常情况下，B 站上都是只提供几种简单的排序，比如播放数，弹幕数，硬币数，收藏数来进行。而且通过分析他的请求，可以发现他的数据都是通过离线计算出来的。

比如说，我希望得到 2016.08.01 ~ 2016.08.12 中弹幕最多的完结动漫，所以，这个请求是: [http://www.bilibili.com/list/damku-32-1-2016-08-06~2016-08-12.html](http://www.bilibili.com/list/damku-32-1-2016-08-06~2016-08-12.html)，其中，damku 是按照弹幕数排序，32表示完结动漫分类，1表示页码，2016-08-06~2016-08-12表示时间周期。所以很容易的就可以找到规律。

所以，很容易的就能理解 B 站的 cache 策略。离线计算数据，然后凌晨生成静态文件，供搜索或列表使用。

不过这边问题就来了，因为 B 站是不能查询超过 3 个月的数据，所以没有办法获得一个整体的数据来让我进行分析。比如我可能就是希望获得从 B 站建站开始的数据，所以，就得一个人进行数据的积累。不过也能理解，毕竟他对每一个时间段都进行了缓存。比如3个月算，他需要缓存 3600 个页面，这只是一个月的量。

然后就是如何定义这个最容易吐槽的方式，一开始我只是想单纯的进行弹幕数量的比较。这毕竟是最快的方式，但是，这样并不能找到最近的火的动漫，比如说最近比较火的《在下坂本有何贵干》，因为时间的原因，所以导致弹幕数量并不多。所以根据这个方法很容易遗漏。所以，建立了这样的一个公式： `弹幕数 / 影片发布时间 / 影片播放数`，这样来进行排序。
