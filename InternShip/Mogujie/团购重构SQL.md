CREATE TABLE `TuanItemStep` (
  `tuanId` int(10) NOT NULL AUTO_INCREMENT COMMENT '团购id',
  `tuanName` varchar(255) DEFAULT NULL COMMENT '团购名称',
  `tuanIntion` varchar(255) DEFAULT NULL COMMENT '团购介绍',
  `tuanDiscount` float DEFAULT NULL COMMENT '团购折扣',
  `itemId` int(10) NOT NULL COMMENT '商品id',
  `type` tinyint(4) DEFAULT '0' COMMENT '标识是否为优选商品 - 三优为1',
  `shopId` varchar(255) NOT NULL COMMENT '店铺id',
  `tuanImg` varchar(255) DEFAULT NULL COMMENT '宝贝图片地址',
  `coverImg` varchar(255) DEFAULT NULL COMMENT '封面图',
  `step` tinyint(4) DEFAULT '1' COMMENT '商品报名步骤',
  `denyCause` varchar(512) DEFAULT NULL COMMENT '拒绝理由',
  `lastVertifyTime` int(10) DEFAULT '0' COMMENT '最后核实时间',
  `itemCheckId` int(10) NOT NULL DEFAULT '0' COMMENT '商品验货id',
  `isvalid` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否显示 0为不显示',
  `status` tinyint(2) NOT NULL DEFAULT '0' COMMENT '商品状态,1为正常,3为结束,5为删除',
  `tCatId` int(10) DEFAULT NULL COMMENT '团购分类Id',
  `gCatId` int(10) DEFAULT NULL COMMENT '商品类目第一级类目，用于团购图墙分类',
  `gCatIds` varchar(64) DEFAULT NULL COMMENT '商品类目全路径Id,使用##分隔',
  `created` int(10) DEFAULT NULL COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  `trustUser` int(10) DEFAULT '0' COMMENT '团购审核通过人员id',
  `detailImgs` varchar(255) DEFAULT NULL COMMENT '团购sku图',
  `tuanStart` int(10) DEFAULT NULL COMMENT '团购结束时间',
  `tuanEnd` int(10) DEFAULT NULL COMMENT '团购开始时间',
  `tuanPrice` int(10) NOT NULL COMMENT '团购价格',
  `showType` tinyint(4) NOT NULL DEFAULT '0' COMMENT '显示类型, 0-PC和APP,1-APP,2-PC',
  `sellerId` int(10) NOT NULL COMMENT '商家ID',
  PRIMARY KEY (`tuanId`),
  KEY `idx_step` (`step`),
  KEY `idx_tuanEnd` (`tuanEnd`),
  KEY `idx_tuanStart` (`tuanStart`),
  KEY `idx_shopId` (`shopId`),
  KEY `idx_sellerId` (`sellerId`),
  KEY `idx_itemId` (`itemId`),
  KEY `idx_itemCheckId` (`itemCheckId`),
  KEY `idx_tCatId` (`tCatId`),
  KEY `idx_gCatId` (`gCatId`),
  KEY `idx_trustUser` (`trustUser`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 COMMENT='团购审核过程表';


CREATE TABLE `TuanItem` (
  `tuanId` int(10) NOT NULL COMMENT '团购id',
  `tuanName` varchar(255) DEFAULT NULL COMMENT '团购名称',
  `tuanIntion` varchar(255) DEFAULT NULL COMMENT '团购介绍',
  `shopId` int(10) NOT NULL DEFAULT '0' COMMENT '店铺ID',
  `itemId` bigint(20) DEFAULT NULL COMMENT '商品ID',
  `type` tinyint(4) DEFAULT '0' COMMENT '标识是否为优选商品 - 三优为1',
  `clickTotal` int(10) NOT NULL DEFAULT '0' COMMENT '点击宝贝数',
  `tuanDiscount` float DEFAULT NULL COMMENT '宝贝折扣,原价通过接口获取',
  `tuanStart` int(10) NOT NULL COMMENT '开始时间',
  `tuanEnd` int(10) NOT NULL COMMENT '结束时间',
  `tuanImg` varchar(255) DEFAULT NULL COMMENT '宝贝图片地址',
  `coverImg` varchar(255) DEFAULT NULL COMMENT '封面图',
  `status` tinyint(2) NOT NULL DEFAULT '0' COMMENT '商品状态,1为正常,3为结束,5为删除',
  `isTop` tinyint(4) NOT NULL DEFAULT '0' COMMENT '是否置顶 1为置顶',
  `showType` tinyint(4) NOT NULL DEFAULT '0' COMMENT '显示范围,0网站和手机，1手机，2网站',
  `trustUser` int(10) NOT NULL DEFAULT '0' COMMENT '可信用户数',
  `tCatId` int(10) DEFAULT NULL COMMENT '团购分类Id',
  `gCatId` int(10) DEFAULT NULL COMMENT '商品类目第一级类目，用于团购图墙分类',
  `gCatIds` varchar(64) DEFAULT NULL COMMENT '商品类目全路径Id,使用##分隔',
  `created` int(10) DEFAULT NULL COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  `detailImgs` varchar(255) DEFAULT NULL COMMENT '团购sku图',
  `tuanPrice` float NOT NULL COMMENT '团购价格',
  `sellerId` int(10) NOT NULL COMMENT '卖家ID',
  PRIMARY KEY (`tuanId`),
  KEY `idx_tuanEnd` (`tuanEnd`),
  KEY `idx_tuanStart` (`tuanStart`),
  KEY `idx_shopId` (`shopId`),
  KEY `idx_itemId` (`itemId`),
  KEY `idx_tCatId` (`tCatId`),
  KEY `idx_gCatId` (`gCatId`),
  KEY `idx_tuanPrice` (`tuanPrice`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='团购商品表';

CREATE TABLE `TuanEvent` (
  `tid` int(10) unsigned NOT NULL COMMENT '活动Tid',
  `tname` varchar(255) DEFAULT NULL COMMENT '活动名',
  `tinfo` varchar(510) DEFAULT NULL COMMENT '备用字段',
  `onlineTime` int(10) DEFAULT NULL COMMENT '对外入口开放时间',
  `offlineTime` int(10) DEFAULT NULL COMMENT '对外入口结束时间',
  `pageHeadImg` varchar(255) DEFAULT NULL COMMENT '页头banner',
  `colors` varchar(255) DEFAULT NULL COMMENT 'json格式，背景色及导航栏颜色，包括background、navBarBackground、navBarSelectedBackground、navBarFontUnselectedColor、navBarFontSelectedColor',
  `isNavBarEnable` tinyint(1) DEFAULT '1' COMMENT '是否显示导航栏',
  `navBarHeadImg` varchar(255) DEFAULT NULL COMMENT '导航栏头部图片',
  `navBarFootImg` varchar(255) DEFAULT NULL COMMENT '导航栏底部图片',
  `isMoreBtnEnable` tinyint(1) DEFAULT NULL COMMENT '查看更多按钮是否显示',
  `moreBtnImg` varchar(255) DEFAULT NULL COMMENT '查看更多按钮图片',
  `moreBtnUrl` varchar(255) DEFAULT NULL COMMENT '查看更多按钮链接',
  `subTheme` varchar(1024) DEFAULT NULL COMMENT '子主题，json格式,经过压缩',
  `creatorId` int(10) DEFAULT NULL COMMENT '创建者Id',
  `creator` varchar(32) DEFAULT NULL COMMENT '创建者',
  `created` int(10) DEFAULT NULL COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  `isDeleted` tinyint(1) DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`tid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='团购活动';

CREATE TABLE `TuanEventSubTheme` (
  `tuanEventSubId` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '子主题ID',
  `tuanEventId` int(10) unsigned NOT NULL COMMENT '活动Tid',
  `subThemeName` varchar(255) DEFAULT NULL COMMENT '子主题名',
  `subThemeImg` varchar(255) DEFAULT NULL COMMENT '子主题图片',
  `created` int(10) DEFAULT NULL COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  `isDeleted` tinyint(1) DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`tuanEventSubId`),
  KEY `idx_tuaneventid` (`tuanEventId`)
) ENGINE=InnoDB AUTO_INCREMENT=109 DEFAULT CHARSET=utf8 COMMENT='团子主题信息表';

CREATE TABLE `TuanEventSubThemeRelate` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '关联id',
  `tuanEventSubId` int(10) unsigned NOT NULL COMMENT '子主题ID',
  `tradeItemId` bigint(20) unsigned NOT NULL COMMENT '商品ID',
  `created` int(10) DEFAULT NULL COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  `isDeleted` tinyint(1) DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`),
  KEY `idx_tuaneventsubid` (`tuanEventSubId`)
) ENGINE=InnoDB AUTO_INCREMENT=1788 DEFAULT CHARSET=utf8 COMMENT='团子主题关联表';

CREATE TABLE `TuanGroup` (
  `tid` int(10) NOT NULL AUTO_INCREMENT COMMENT '主题或者活动id',
  `tname` varchar(255) DEFAULT NULL COMMENT '主题名',
  `tinfo` varchar(255) DEFAULT NULL COMMENT '主题简介',
  `creatorId` int(10) NOT NULL DEFAULT '0' COMMENT '创建者的userId',
  `creator` varchar(32) NOT NULL COMMENT '创建者名',
  `bstart` int(10) NOT NULL DEFAULT '0' COMMENT '报名开始时间',
  `bend` int(10) NOT NULL DEFAULT '0' COMMENT '报名截止时间',
  `isSellerVisible` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否对卖家可见',
  `isOnline` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否上线',
  `showtype` varchar(16) NOT NULL DEFAULT '0' COMMENT '展示位置，顺序 【pc端、手机端】0为未选择 1为选中 以,连接',
  `scope` varchar(16) NOT NULL DEFAULT '0' COMMENT '招商范围，顺序 【优店、蘑菇团】0为未选择 1为选中 以,连接',
  `invitedSellerIds` varchar(20000) DEFAULT NULL COMMENT '受邀商家id,用|分隔',
  `tags` varchar(255) DEFAULT NULL COMMENT '标签',
  `isDeleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否已被删除 1 为已删除 0 为未被删除',
  `type` tinyint(1) NOT NULL DEFAULT '0' COMMENT '类型 0：主题 1：活动',
  `created` int(10) NOT NULL DEFAULT '0' COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`tid`),
  KEY `idx_time` (`bstart`,`bend`),
  KEY `idx_creatorid` (`creatorId`)
) ENGINE=InnoDB AUTO_INCREMENT=62 DEFAULT CHARSET=utf8 COMMENT='团购分组表';


CREATE TABLE `TuanGuarantFee` (
  `id` int(10) NOT NULL AUTO_INCREMENT COMMENT '编号',
  `outPayType` int(10) NOT NULL DEFAULT '0' COMMENT '外部支付类型与资金这边一致',
  `payRequestId` int(10) NOT NULL DEFAULT '0' COMMENT 'payType =1 的那条',
  `amount` int(10) DEFAULT '0' COMMENT '钱（单位分）',
  `status` tinyint(4) DEFAULT '0' COMMENT '状态 1 成功 0失败',
  `fromUserId` int(10) DEFAULT '0',
  `tuanId` int(10) NOT NULL COMMENT '团购商品编号',
  `created` int(10) DEFAULT '0' COMMENT '创建时间',
  `updated` int(10) DEFAULT '0' COMMENT '更新时间',
  `refundRequestId` int(10) DEFAULT '0' COMMENT '退款的requestId',
  `refundTime` int(10) DEFAULT '0' COMMENT '退款时间',
  `refundAmount` int(10) DEFAULT '0' COMMENT '钱（单位分）',
  `refundStatus` tinyint(4) NOT NULL DEFAULT '1' COMMENT '团购保证金允许退款状态：1-等待全部订单完成  2-等待最后一笔订单维权期结束  3-允许退款 4-退款完成 5-退款失败',
  `leftTime` int(10) DEFAULT '0' COMMENT '距离最后一笔订单距离维权期限结束时间',
  `refundFinishTime` int(10) DEFAULT '0' COMMENT '退款完成时间',
  PRIMARY KEY (`id`),
  KEY `idx_fromUserId` (`fromUserId`),
  KEY `idx_created` (`created`),
  KEY `idx_tuanid` (`tuanId`),
  KEY `idx_refundTime` (`refundTime`),
  KEY `idx_refundFinishTime` (`refundFinishTime`)
) ENGINE=InnoDB AUTO_INCREMENT=1049 DEFAULT CHARSET=utf8 COMMENT='团购卖家/冲/退保证金记录表';


CREATE TABLE `TuanGuideInfo` (
  `tuan_guide_id` tinyint(3) NOT NULL COMMENT '优惠券使用方法ID',
  `tuan_guide_name` varchar(20) NOT NULL COMMENT '团购使用方法名称',
  `image_file_full_name` varchar(30) NOT NULL DEFAULT '' COMMENT '图片文件名',
  `use_step1` varchar(100) NOT NULL DEFAULT '' COMMENT '使用步骤1',
  `use_step2` varchar(100) NOT NULL DEFAULT '' COMMENT '使用步骤2',
  `use_step3` varchar(100) NOT NULL DEFAULT '' COMMENT '使用步骤3',
  `updated` int(10) NOT NULL DEFAULT '0' COMMENT '更新时间',
  PRIMARY KEY (`tuan_guide_id`),
  UNIQUE KEY `tuan_guide_name` (`tuan_guide_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='优惠券使用步骤';

CREATE TABLE `TuanMulti` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tuanId` int(10) NOT NULL COMMENT '团购编号',
  `refundRate` int(10) NOT NULL DEFAULT '0' COMMENT '退货率',
  `compaintRate` int(10) NOT NULL DEFAULT '0' COMMENT '投诉率',
  `imRate` int(10) NOT NULL DEFAULT '0' COMMENT 'im反应时间',
  `receiveRate` int(10) NOT NULL DEFAULT '0' COMMENT '物流揽件率',
  `expiredRate` int(10) NOT NULL DEFAULT '0' COMMENT '本次过期时间一般为create后12d',
  `sendRate` int(10) NOT NULL DEFAULT '0' COMMENT '发货时间',
  `isvalid` tinyint(1) NOT NULL DEFAULT '1' COMMENT '是否可以上线标志 0 通过  1不通过',
  `comment` varchar(128) NOT NULL DEFAULT '' COMMENT '备注',
  `created` int(10) NOT NULL DEFAULT '0',
  `updated` int(10) NOT NULL DEFAULT '0',
  `nstartDay` int(10) DEFAULT NULL COMMENT '下一次开始时间',
  `nlastDay` int(10) DEFAULT NULL COMMENT '下一次结束时间',
  `status` tinyint(4) NOT NULL DEFAULT '1' COMMENT '状态 1等待数据 2等待卖家确认 3 确认超时 0可以上线 ',
  `itemId` bigint(20) NOT NULL COMMENT '商品编号',
  `userId` int(10) NOT NULL COMMENT '店长ID',
  PRIMARY KEY (`id`),
  KEY `idx_tuanid` (`tuanId`),
  KEY `idx_tradeItemId` (`itemId`),
  KEY `idx_userId` (`userId`),
  KEY `idx_created` (`created`)
) ENGINE=InnoDB AUTO_INCREMENT=481 DEFAULT CHARSET=utf8 COMMENT='团购的商家健康';

CREATE TABLE `TuanSellerPunish` (
  `tuanPunishId` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '处罚id',
  `sellerId` int(10) NOT NULL COMMENT '卖家id',
  `isPause` int(1) DEFAULT '0' COMMENT '是否暂停与卖家的合作',
  `reason` varchar(225) DEFAULT NULL COMMENT '处罚理由',
  `punishStart` int(10) DEFAULT NULL COMMENT '处罚开始时间',
  `punishEnd` int(10) DEFAULT NULL COMMENT '处罚结束时间',
  `created` int(10) DEFAULT NULL COMMENT '创建时间',
  `updated` int(10) DEFAULT NULL COMMENT '更新时间',
  `creatorId` int(10) DEFAULT NULL COMMENT '最后修改者id',
  `creator` varchar(32) DEFAULT NULL COMMENT '最后修改者',
  `isDeleted` tinyint(1) DEFAULT '0' COMMENT '是否删除',
  `oplog` varchar(1000) DEFAULT NULL COMMENT '操作日志',
  PRIMARY KEY (`tuanPunishId`),
  KEY `idx_userId` (`sellerId`)
) ENGINE=InnoDB AUTO_INCREMENT=58 DEFAULT CHARSET=utf8 COMMENT='团购卖家处罚表';

CREATE TABLE `TuanAdminLog` (
  `operationId` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT '操作日志ID',
  `adminId` int(10) NOT NULL DEFAULT '0' COMMENT '管理员的userId',
  `commodityId` int(10) NOT NULL DEFAULT '0' COMMENT '商品id',
  `operationType` varchar(255) DEFAULT NULL COMMENT '操作类型',
  `operationTime` int(10) DEFAULT NULL COMMENT '操作时间',
  `sellerId` int(10) NOT NULL DEFAULT '0' COMMENT '卖家的userId',
  `opStep` tinyint(4) NOT NULL DEFAULT '-1' COMMENT '执行步骤（如初审，复审等）',
  `opType` tinyint(4) NOT NULL DEFAULT '-1' COMMENT '操作类型(编辑，通过，拒绝，回退等)',
  PRIMARY KEY (`operationId`),
  KEY `idx_adminId` (`adminId`),
  KEY `idx_commodityId` (`commodityId`),
  KEY `idx_operationTime` (`operationTime`),
  KEY `idx_sellerId` (`sellerId`),
  KEY `idx_opStep` (`opStep`),
  KEY `idx_opType` (`opType`)
) ENGINE=InnoDB AUTO_INCREMENT=635169 DEFAULT CHARSET=utf8 COMMENT='管理员操作日志表';