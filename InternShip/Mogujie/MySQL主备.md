MySQL主备 -- 淘宝丁奇
---

MySQL 主备, 多写 - 数据不一致. 主备延迟.

MS结构, HA监控,切换,延迟监控.

主备循环更新. 双只读. 切换的时侯,双只读.

监控的时侯是update语句,通过select则会产生磁盘.

主库是可用性,从库是延迟监控.

主备延迟的原因.


binlog 两种类型

1. insert 语句 statement
2. update+1, 写两行,之前是什么,修改之后是什么.
中转日志.先写下来,然后在异步更新. === 延迟问题.


主从不一致,主要是因为更新同一行,最好的解决办法,就是按照不同的主键进行分组,然后进行分发.

多个不一致,等. 大量数据的hash.

传输模式.io很重,用预读的方式.

###主备一致性
视图同时性

逻辑视图.主库

gtid_mode 下,不支持create as select.
